<!-- index.html -->

  <!-- Auth0Lock script -->
  <script src="https://cdn.auth0.com/js/lock-8.1.min.js"></script>

  <!-- Setting the right viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

<script>
  // app.js

var lock = new Auth0Lock('wTqURUL00Y8gMlbLC6q60E5A2fETWlEw','dev-qhmst0-c.us.auth0.com');
  </script>

<!-- index.html -->

 

  <button id="btn-login" class="btn-login">Sign In</button>

 

<script>
  // app.js

document.getElementById('btn-login').addEventListener('click', function() {
  lock.show(function(err, profile, token) {
    if (err) {
      // Error callback
      console.error("Something went wrong: ", err);
    } else {
      // Success calback  

      // Save the JWT token.
      localStorage.setItem('userToken', token);
      // Save the profile
      localStorage.setItem('userProfile', JSON.stringify(profile));
    }
  });
});
  // app.js

var getFoos = fetch('/api/foo', {
  headers: {
    'Authorization': 'Bearer ' + localStorage.getItem('userToken')
  },
  method: 'GET',
  cache: false
});

getFoos.then(function (response) {
  response.json().then(function (foos) {
    console.log('the foos:', foos);
  });
});
  // app.js

localStorage.removeItem('userToken');
localStorage.removeItem('userProfile');
window.location.href = "/";
 
</script>




